# 负载性能模型

* 软件世界中有很多benchmark（基准），如我们测试个人PC性能常用的软件，比如鲁大师
* 如何设计一个好的benchmark？
* 由于软件的运行特征本身太过于宽泛。想要了解一个负载的性能，我们需要先对软件性能本身进行建模





## 负载的特征

### 体系结构和微体系结构

* 体系结构是处理器处理器软件和硬件之间的接口，通过指令集来规定。简单概括：汇编程序员能够直接使用的功能。一般称为instruction set architecture，其典例有X86-32，X86-64，ARMv8，ARMv9
* 微体系结构是为提高处理性能而专门设计的结构，如cache, branch predictor, ROB。可以看出不是必需的。



### 静态微架构无关特征



任何程序都能被表征为一个汇编指令文件，换句话说，任何程序都能被表示为指令序列集合。统计指令序列的一些重要的值形成了重要的特征，其中：

* 不包含处理器微体系结构的信息
* 也不包含程序运行的动态信息

的特征被称为静态微架构无关特征：

* 汇编码的基本块数量



#### 基本块的含义

```c++
int foo(int x) {
    int y = x + 1;
    int z = y * 2;
    return z;
}
```

上面的代码经过编译后，生成的汇编码如下：

```assembly
foo:
    movl %edi, %eax
    addl $1, %eax
    leal (%rax,%rax), %eax
    retq
```







## 基本分类方法

* CPU负载
  * 单线程负载
  * 多线程负载
  * 集群负载
  * 延迟敏感
  * 批处理
  * 微服务
  * 流式处理
  * 批流融合
  * WASM
* GPU负载
  * CUDA流式负载
  * CUDA非流式负载